<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
  	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout/defaultLayout">
      
	<head>
	    <meta charset="utf-8">
	    <title>Dashboard ::: AWS Analyzer</title>    
	</head>
	
	<th:block layout:fragment="customScript">
		<script th:inline="javascript">		
			window.onload = function() {
				if([[${session.profile != null}]]) {
					if([[${session.serviceRepository == null}]]) {		
							collectServiceData();
					}
				} else {
					location.href = "/profiles";
				}	
			};
		</script>
	</th:block>
	
	<body>
		
		<div layout:fragment="content">
			<div class="container-fluid">
				<div class="row">
		            <div class="col-lg-3 col-md-6 col-sm-6" th:each="profileName : ${profileNames}">
						<div class="card card-stats">
							<div class="card-header card-header-warning card-header-icon">
								<div class="card-icon">
									<i class="material-icons">account_box</i>
								</div>
								<p class="card-category">Profile</p>
								<h3 class="card-title" th:text="${profileName}">default</h3>
							</div>
							<div class="card-footer">
								<div class="dropdown">
									<button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
									Select Region
									</button>
									<div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
									<th:block th:each="region : ${regions}">
										<a class="dropdown-item" th:href="'/setProfile/' + ${profileName} + '/' + ${region.id()}" th:text="${region.id()}">Action</a>
									</th:block>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	
	</body>
</html>